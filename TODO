try the enumflags crate to replace the numeric_enums internal one.
remake the async sockets using macros
